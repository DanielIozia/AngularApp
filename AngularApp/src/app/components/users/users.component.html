    <section>
      <!-- Icona di caricamento -->
      <div *ngIf="isLoading" class="loading-container">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- Contenuto visibile solo quando il caricamento Ã¨ completato -->
      <div *ngIf="!isLoading">
        <!-- Filtro per ricerca utente -->
        <form class="filter-form">
          <mat-form-field appearance="fill">
            <mat-label>Filter by Name or Email</mat-label>
            <input matInput [(ngModel)]="filterValue" name="filter" (input)="applyFilter()" placeholder="Type a name or email">
          </mat-form-field>
          <!-- Bottone per pulire il filtro -->
          <button mat-icon-button matSuffix aria-label="Clear" class="clear-button" (click)="clearFilter()">
            <mat-icon>close</mat-icon>
          </button>
        </form>

        <!-- Tabella utenti -->
        <table mat-table [dataSource]="filteredUsers" class="mat-elevation-z8 user-table">

          <!-- Name Column -->
          <ng-container matColumnDef="index">
            <th mat-header-cell *matHeaderCellDef> Position </th>
            <td mat-cell *matCellDef="let element, let i = index" [ngClass]="{'highlight-row': element.id === userID}">
              <div (click)="element.id === userID ? goToProfile() : goToDetail(element.id)">
                {{i+1}}
              </div>
            </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let element" [ngClass]="{'highlight-row': element.id === userID}">
              <div (click)="element.id === userID ? goToProfile() : goToDetail(element.id)">
                {{element.name}}
              </div>
            </td>
          </ng-container>

          <!-- Email Column -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef> Email </th>
            <td mat-cell *matCellDef="let element" [ngClass]="{'highlight-row': element.id === userID}">
              <div (click)="element.id === userID ? goToProfile() : goToDetail(element.id)">
                {{element.email}}
              </div>
            </td>
          </ng-container>

          <!-- Status Column -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;"> Status </th>
            <td mat-cell *matCellDef="let element" style="text-align: center;" [ngClass]="{'highlight-row': element.id === userID}">
              <span [ngClass]="{'green-dot': element.status === 'active', 'red-dot': element.status === 'inactive'}"></span>
            </td>
          </ng-container>

          <!-- Delete Column -->
          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;"></th>
            <td mat-cell *matCellDef="let element" style="text-align: center;">
              <ng-container *ngIf="deletingUserId === element.id; else deleteIcon">
                <div class="spinner-border text-primary" role="status" style="width: 1rem; height: 1rem;">
                  <span class="visually-hidden">Deleting...</span>
                </div>
              </ng-container>
              <ng-template #deleteIcon>
                <span class="delete" (click)="element.id !== userID ? deleteUser(element.id, element.name) : null">
                  <mat-icon *ngIf="element.id != userID">delete</mat-icon>
                </span>
              </ng-template>
            </td>
          </ng-container>
          
          <!-- Header Row -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <!-- Data Rows -->
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="user-row" [ngClass]="{'highlight-row': row.id === userID}"></tr>
        </table>

        <!-- Paginatore -->
  <div class="pagination-controls">
    <div class="paginator">
      <button (click)="previousPage()" [disabled]="primaPagina"> < </button> <!-- back -->
      <span>Page {{currentPage}}</span>
      <button (click)="nextPage()" [disabled]="!oltre"> > </button> <!-- next -->
    </div>
    <div class="select-users-per-page">
      <!-- Selezionatore per il numero di utenti da mostrare -->
      <mat-form-field appearance="fill">
        <mat-label>user</mat-label>
        <mat-select [(ngModel)]="usersPerPage" (selectionChange)="onUsersPerPageChange($event)">
          <mat-option *ngFor="let option of usersPerPageOptions" [value]="option">{{option}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

        
        
      </div>
    </section>
